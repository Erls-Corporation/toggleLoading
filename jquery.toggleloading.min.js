(function(a){a.fn.toggleLoading=function(b){var c=a(window),d={width:42,height:42,background:"light",imagesFolder:"../images",speed:75};if(b){a.extend(d,b)}return this.each(function(){var b=a(this),e=b.children(),f=b.data("loading");if(!f){f=b.data("loading",{$spinner:a(document.createElement("div")).css({position:"absolute",width:d.width,height:d.height,backgroundImage:"url("+d.imagesFolder+"/"+(d.background==="dark"?"spinner-dark.png":"spinner-light.png")+")"}).addClass("spinner").prependTo(b),interval:setInterval(function(){f.$spinner.css({backgroundPosition:function(a,b){return"0 "+(parseInt(b.split(" ")[1],10)-d.height)+"px"}})},d.speed)}).data("loading");if(b.css("position")!=="static"){f.$spinner.css({top:"50%",left:"50%",marginLeft:d.width/2*-1,marginTop:d.height/2*-1})}else{c.on("resize.loading",function(){f.$spinner.css({top:b.position().top+b.outerHeight()/2-d.height/2,left:b.position().left+b.outerWidth()/2-d.width/2})}).resize()}}else{clearInterval(f.interval);f.$spinner.remove();c.off("resize.loading");b.removeData("loading")}return this})}})(jQuery)
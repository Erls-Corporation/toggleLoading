(function(a){a.fn.toggleLoading=function(b){var c={dim:1/3,width:42,height:42,opacity:3/4,color:"light",image:"images/spinner.png",speed:75};if(b){a.extend(c,b)}if(c.color==="dark"){c.image="images/spinner-white.png"}return this.each(function(){var b=a(this),d;d=b.data("loading");if(!d){b.css("opacity",c.dim).data("loading",{spinner:a(document.createElement("div")).css({position:"fixed","z-index":1,width:c.width,height:c.height,opacity:c.opacity,"background-image":"url("+c.image+")"}).addClass("spinner").data("color",c.color).insertBefore(this),interval:setInterval(function(){d.spinner.css({"background-position-y":parseInt(d.spinner.css("background-position-y"),10)-c.height})},c.speed)});d=b.data("loading");a(window).resize(function(){d.spinner.css({top:b.offset().top+b.height()/2-c.height/2,left:b.offset().left+b.width()/2-c.width/2})}).resize()}else{d.spinner.remove();clearInterval(d.interval);b.css("opacity","").removeData("loading")}return this})}})(jQuery)
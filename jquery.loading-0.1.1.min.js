(function(a){a.fn.toggleLoading=function(c){var b={dim:1/3,width:42,height:42,opacity:3/4,color:"light",image:"images/spinner.png",speed:75};if(c){a.extend(b,c)}if(b.color==="dark"){b.image="images/spinner-white.png"}return this.each(function(){var d=a(this),e;e=d.data("loading");if(!e){d.css("opacity",b.dim).data("loading",{spinner:a(document.createElement("div")).css({position:"fixed","z-index":1,width:b.width,height:b.height,opacity:b.opacity,"background-image":"url("+b.image+")"}).addClass("spinner").data("color",b.color).insertBefore(this),interval:setInterval(function(){e.spinner.css({"background-position-y":parseInt(e.spinner.css("background-position-y"),10)-b.height})},b.speed)});e=d.data("loading");a(window).resize(function(){e.spinner.css({top:d.offset().top+(d.height()/2)-(b.height/2),left:d.offset().left+(d.width()/2)-(b.width/2)})}).resize()}else{e.spinner.remove();clearInterval(e.interval);d.css("opacity","").removeData("loading")}return this})}})(jQuery);